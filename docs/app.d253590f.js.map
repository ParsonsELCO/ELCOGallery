{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/EditorControlsFP.js","webpack:///./src/PickHelper.js","webpack:///./src/lib/WebGLApp.js","webpack:///./src/lib/loadTexture.js","webpack:///./src/lib/AssetManager.js","webpack:///./src/scene/Materials.js","webpack:///./src/scene/Ocean.js","webpack:///./src/scene/Meshes/Gallery.js","webpack:///./src/index.js","webpack:///./src/scene/lights.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","EditorControls","domElement","undefined","console","warn","document","this","enabled","movementSpeed","lookSpeed","lookVertical","autoForward","activeLook","heightSpeed","heightCoef","heightMin","heightMax","constrainVertical","verticalMin","verticalMax","Math","PI","mouseDragOn","autoSpeedFactor","mouseX","mouseY","moveForward","moveBackward","moveLeft","moveRight","viewHalfX","viewHalfY","targetPosition","lat","lon","lookDirection","Vector3","spherical","Spherical","target","contextmenu","event","preventDefault","setAttribute","handleResize","innerWidth","innerHeight","offsetWidth","offsetHeight","onMouseDown","focus","onMouseUp","onMouseMove","pageX","pageY","offsetLeft","offsetTop","onKeyDown","keyCode","moveUp","moveDown","logPosAndRot","onKeyUp","lookAt","x","y","z","isVector3","copy","set","setOrientation","update","delta","actualMoveSpeed","translateZ","translateX","translateY","actualLookSpeed","verticalLookRatio","max","min","phi","MathUtils","degToRad","theta","mapLinear","position","setFromSphericalCoords","add","log","rotation","dispose","removeEventListener","_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown","_onKeyUp","scope","fn","arguments","controls","quaternion","applyQuaternion","setFromVector3","radToDeg","addEventListener","PickHelper","webgl","_classCallCheck","raycaster","THREE","coords","pickedObject","_ref2","_slicedToArray","_ref","width","height","setFromCamera","camera","intersectObjects","interactables","_ref4","_ref3","_ref6","_ref5","WebGLApp","_this","_ref$background","background","_ref$backgroundAlpha","backgroundAlpha","_ref$fov","fov","_ref$near","near","_ref$far","far","_ref$editorControls","editorControls","options","_objectWithoutProperties","WebGLApp_classCallCheck","_updateListeners","writable","_tmpTarget","_lastTime","_width","_height","resize","_ref2$width","_ref2$height","_ref2$pixelRatio","pixelRatio","renderer","getPixelRatio","setPixelRatio","setSize","isPerspectiveCamera","aspect","updateProjectionMatrix","composer","scene","traverse","obj","draw","dt","time","xrframe","_classPrivateFieldLooseBase","forEach","render","start","isRunning","setAnimationLoop","animate","stop","now","stats","begin","maxDeltaTime","end","_len","args","Array","_key","child","_objectSpread","antialias","alpha","preserveDrawingBuffer","canvas","setClearColor","xr","maxPixelRatio","gl","getContext","performance","postprocessing","EffectComposer","addPass","RenderPass","pickHelper","touchHandler","createTouches","filtered","isDragging","on","ev","pos","onPointerDown","onPointerMove","showFps","Stats","showPanel","body","appendChild","dom","gpu","getGPUTier","glContext","type","tier","Number","isMobile","toLowerCase","includes","index","indexOf","devicePixelRatio","style","cursor","loadTexture","_x","_x2","_loadTexture","_callee","url","texture","image","regeneratorRuntime","wrap","_context","prev","next","encoding","setTextureParams","loadImage","crossorigin","sent","needsUpdate","initTexture","abrupt","t0","Error","concat","opt","flipY","mapping","format","isJPEG","search","repeat","wrapS","wrapT","minFilter","magFilter","generateMipmaps","AssetManager","TypeError","AssetManager_classPrivateFieldLooseBase","_cache","_onProgressListeners","AssetManager_objectWithoutProperties","_getQueued","_queue","AssetManager_objectSpread","_extractType","find","item","ext","lastIndexOf","test","itemLoadingStart","Date","_loadItem","DEBUG","prettyMs","error","queue","total","setTimeout","_this2","loadingStart","pMap","AssetManager_asyncToGenerator","mark","_callee2","percent","_context2","logError","_x3","_x4","concurrency","_asyncConcurrency","errors","_logs","filter","groupLog","Promise","resolve","reject","GLTFLoader","load","err","FBXLoader","fetch","then","response","json","arrayBuffer","blob","text","_len2","_key2","_console","groupCollapsed","_console2","_toConsumableArray","groupEnd","lib_AssetManager","HdriPink","setPath","T_VideoTextureMain","getElementById","MAT_Flower","color","roughness","metalness","side","MAT_NeonWhite","emissive","emissiveIntensity","MAT_StairPillar","envMap","MAT_EHJwall","map","emissiveMap","MAT_EHJinlay","MAT_Marble","MAT_MatteBlack","MAT_SteelFrame","MAT_WhiteSteel","Gallery","Ocean_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","waterGeometry","water","Water","textureWidth","textureHeight","waterNormals","sunColor","waterColor","distortionScale","material","uniforms","galleryKey","assets","Gallery_classCallCheck","Gallery_possibleConstructorReturn","Gallery_getPrototypeOf","galleryGltf","T_TNfruity_BCKey","T_TNtogether_BCKey","T_TNtoday_BCKey","T_TNdisability_BCKey","T_TNehjMain_BCKey","T_TNehjMini_BCKey","MAT_TNfruity","MAT_TNehjMain","MAT_TNehjMini","MAT_TNtogether","MAT_TNtoday","MAT_TNdisability","querySelector","gui","GUI","visibility","environment","hemiLight","lightDirKey","multiplyScalar","addEnvironment","ocean","Ocean","gallery","setup","bloomPass","UnrealBloomPass","renderToScreen","folder","addFolder","step"],"mappings":"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","file":"app.d253590f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([159,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author paulirish / http://paulirish.com/\r\n */\r\n\r\nimport { MathUtils, Spherical, Vector3 } from 'three';\r\n\r\nvar EditorControls = function (object, domElement) {\r\n  if (domElement === undefined) {\r\n    console.warn(\r\n      'THREE.EditorControls: The second parameter \"domElement\" is now mandatory.'\r\n    );\r\n    domElement = document;\r\n  }\r\n\r\n  this.object = object;\r\n  this.domElement = domElement;\r\n\r\n  // API\r\n\r\n  this.enabled = true;\r\n\r\n  this.movementSpeed = 1.0;\r\n  this.lookSpeed = 0.005;\r\n\r\n  this.lookVertical = true;\r\n  this.autoForward = false;\r\n\r\n  this.activeLook = true;\r\n\r\n  this.heightSpeed = false;\r\n  this.heightCoef = 1.0;\r\n  this.heightMin = 0.0;\r\n  this.heightMax = 1.0;\r\n\r\n  this.constrainVertical = false;\r\n  this.verticalMin = 0;\r\n  this.verticalMax = Math.PI;\r\n\r\n  this.mouseDragOn = false;\r\n\r\n  // internals\r\n\r\n  this.autoSpeedFactor = 0.0;\r\n\r\n  this.mouseX = 0;\r\n  this.mouseY = 0;\r\n\r\n  this.moveForward = false;\r\n  this.moveBackward = false;\r\n  this.moveLeft = false;\r\n  this.moveRight = false;\r\n\r\n  this.viewHalfX = 0;\r\n  this.viewHalfY = 0;\r\n\r\n  // private variables\r\n\r\n  var lat = 0;\r\n  var lon = 0;\r\n\r\n  var lookDirection = new Vector3();\r\n  var spherical = new Spherical();\r\n  var target = new Vector3();\r\n\r\n  //\r\n\r\n  if (this.domElement !== document) {\r\n    this.domElement.setAttribute('tabindex', -1);\r\n  }\r\n\r\n  //\r\n\r\n  this.handleResize = function () {\r\n    if (this.domElement === document) {\r\n      this.viewHalfX = window.innerWidth / 2;\r\n      this.viewHalfY = window.innerHeight / 2;\r\n    } else {\r\n      this.viewHalfX = this.domElement.offsetWidth / 2;\r\n      this.viewHalfY = this.domElement.offsetHeight / 2;\r\n    }\r\n  };\r\n\r\n  this.onMouseDown = function (event) {\r\n    if (this.domElement !== document) {\r\n      this.domElement.focus();\r\n    }\r\n\r\n    this.mouseDragOn = true;\r\n  };\r\n\r\n  this.onMouseUp = function (event) {\r\n    this.mouseDragOn = false;\r\n  };\r\n\r\n  this.onMouseMove = function (event) {\r\n    if (this.domElement === document) {\r\n      this.mouseX = event.pageX - this.viewHalfX;\r\n      this.mouseY = event.pageY - this.viewHalfY;\r\n    } else {\r\n      this.mouseX = event.pageX - this.domElement.offsetLeft - this.viewHalfX;\r\n      this.mouseY = event.pageY - this.domElement.offsetTop - this.viewHalfY;\r\n    }\r\n\r\n    /*\r\n    var movementX =\r\n      event.movementX || event.mozMovementX || event.webkitMovementX || 0;\r\n    var movementY =\r\n      event.movementY || event.mozMovementY || event.webkitMovementY || 0;\r\n\r\n    euler.setFromQuaternion(camera.quaternion);\r\n\r\n    euler.y -= movementX * 0.002;\r\n    euler.x -= movementY * 0.002;\r\n\r\n    euler.x = Math.max(-PI_2, Math.min(PI_2, euler.x));\r\n\r\n    camera.quaternion.setFromEuler(euler);\r\n    */\r\n  };\r\n\r\n  this.onKeyDown = function (event) {\r\n    // event.preventDefault();\r\n\r\n    switch (event.keyCode) {\r\n      case 87:\r\n        /*W*/ this.moveForward = true;\r\n        break;\r\n      case 65:\r\n        /*A*/ this.moveLeft = true;\r\n        break;\r\n      case 83:\r\n        /*S*/ this.moveBackward = true;\r\n        break;\r\n      case 68:\r\n        /*D*/ this.moveRight = true;\r\n        break;\r\n      case 69:\r\n        /*E*/ this.moveUp = true;\r\n        break;\r\n      case 81:\r\n        /*Q*/ this.moveDown = true;\r\n        break;\r\n      case 32:\r\n        /*SPACE*/ this.logPosAndRot();\r\n        break;\r\n    }\r\n  };\r\n\r\n  this.onKeyUp = function (event) {\r\n    switch (event.keyCode) {\r\n      case 87:\r\n        /*W*/ this.moveForward = false;\r\n        break;\r\n      case 65:\r\n        /*A*/ this.moveLeft = false;\r\n        break;\r\n      case 83:\r\n        /*S*/ this.moveBackward = false;\r\n        break;\r\n      case 68:\r\n        /*D*/ this.moveRight = false;\r\n        break;\r\n      case 69:\r\n        /*E*/ this.moveUp = false;\r\n        break;\r\n      case 81:\r\n        /*Q*/ this.moveDown = false;\r\n        break;\r\n    }\r\n  };\r\n\r\n  this.lookAt = function (x, y, z) {\r\n    if (x.isVector3) {\r\n      target.copy(x);\r\n    } else {\r\n      target.set(x, y, z);\r\n    }\r\n\r\n    this.object.lookAt(target);\r\n\r\n    setOrientation(this);\r\n\r\n    return this;\r\n  };\r\n\r\n  this.update = (function () {\r\n    var targetPosition = new Vector3();\r\n\r\n    return function update(delta) {\r\n      if (this.enabled === false) return;\r\n\r\n      this.autoSpeedFactor = 0.0;\r\n\r\n      var actualMoveSpeed = delta * this.movementSpeed;\r\n\r\n      if (this.moveForward || (this.autoForward && !this.moveBackward))\r\n        this.object.translateZ(-(actualMoveSpeed + this.autoSpeedFactor));\r\n      if (this.moveBackward) this.object.translateZ(actualMoveSpeed);\r\n\r\n      if (this.moveLeft) this.object.translateX(-actualMoveSpeed);\r\n      if (this.moveRight) this.object.translateX(actualMoveSpeed);\r\n\r\n      if (this.moveUp) this.object.translateY(actualMoveSpeed);\r\n      if (this.moveDown) this.object.translateY(-actualMoveSpeed);\r\n\r\n      var actualLookSpeed = delta * this.lookSpeed;\r\n\r\n      if (!(this.activeLook || this.mouseDragOn)) {\r\n        actualLookSpeed = 0;\r\n      }\r\n\r\n      var verticalLookRatio = 1;\r\n\r\n      if (this.constrainVertical) {\r\n        verticalLookRatio = Math.PI / (this.verticalMax - this.verticalMin);\r\n      }\r\n\r\n      lon -= this.mouseX * actualLookSpeed;\r\n      if (this.lookVertical)\r\n        lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\r\n\r\n      lat = Math.max(-85, Math.min(85, lat));\r\n\r\n      var phi = MathUtils.degToRad(90 - lat);\r\n      var theta = MathUtils.degToRad(lon);\r\n\r\n      if (this.constrainVertical) {\r\n        phi = MathUtils.mapLinear(\r\n          phi,\r\n          0,\r\n          Math.PI,\r\n          this.verticalMin,\r\n          this.verticalMax\r\n        );\r\n      }\r\n\r\n      var position = this.object.position;\r\n\r\n      targetPosition.setFromSphericalCoords(1, phi, theta).add(position);\r\n\r\n      this.object.lookAt(targetPosition);\r\n    };\r\n  })();\r\n\r\n  function contextmenu(event) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  this.logPosAndRot = function () {\r\n    console.log(\r\n      'camera position: THREE.Vector3(' +\r\n        this.object.position.x +\r\n        ', ' +\r\n        this.object.position.y +\r\n        ', ' +\r\n        this.object.position.z +\r\n        ')'\r\n    );\r\n    console.log(\r\n      'camera rotation: THREE.Euler(' +\r\n        this.object.rotation.x +\r\n        ', ' +\r\n        this.object.rotation.y +\r\n        ', ' +\r\n        this.object.rotation.z +\r\n        \"'XYZ')\"\r\n    );\r\n  };\r\n\r\n  this.dispose = function () {\r\n    this.domElement.removeEventListener('contextmenu', contextmenu, false);\r\n    this.domElement.removeEventListener('mousedown', _onMouseDown, false);\r\n    this.domElement.removeEventListener('mousemove', _onMouseMove, false);\r\n    this.domElement.removeEventListener('mouseup', _onMouseUp, false);\r\n\r\n    window.removeEventListener('keydown', _onKeyDown, false);\r\n    window.removeEventListener('keyup', _onKeyUp, false);\r\n  };\r\n\r\n  var _onMouseMove = bind(this, this.onMouseMove);\r\n  var _onMouseDown = bind(this, this.onMouseDown);\r\n  var _onMouseUp = bind(this, this.onMouseUp);\r\n  var _onKeyDown = bind(this, this.onKeyDown);\r\n  var _onKeyUp = bind(this, this.onKeyUp);\r\n\r\n  this.domElement.addEventListener('contextmenu', contextmenu, false);\r\n  this.domElement.addEventListener('mousemove', _onMouseMove, false);\r\n  this.domElement.addEventListener('mousedown', _onMouseDown, false);\r\n  this.domElement.addEventListener('mouseup', _onMouseUp, false);\r\n\r\n  window.addEventListener('keydown', _onKeyDown, false);\r\n  window.addEventListener('keyup', _onKeyUp, false);\r\n\r\n  function bind(scope, fn) {\r\n    return function () {\r\n      fn.apply(scope, arguments);\r\n    };\r\n  }\r\n\r\n  function setOrientation(controls) {\r\n    var quaternion = controls.object.quaternion;\r\n\r\n    lookDirection.set(0, 0, -1).applyQuaternion(quaternion);\r\n    spherical.setFromVector3(lookDirection);\r\n\r\n    lat = 90 - MathUtils.radToDeg(spherical.phi);\r\n    lon = MathUtils.radToDeg(spherical.theta);\r\n  }\r\n\r\n  this.handleResize();\r\n\r\n  setOrientation(this);\r\n};\r\n\r\nexport { EditorControls };\r\n","import * as THREE from 'three';\r\n\r\n// TO DO\r\n// - better normalization per fundamentals picking\r\n// - remove touches from webgl app and implement proper touch handling\r\n// - clear touch coord when touch ends\r\n\r\nexport default class PickHelper {\r\n  constructor(webgl) {\r\n    this.webgl = webgl;\r\n    this.raycaster = new THREE.Raycaster();\r\n    this.coords = new THREE.Vector2();\r\n    this.pickedObject = null;\r\n  }\r\n\r\n  onPointerDown(event, [x, y]) {\r\n    this.coords.set(\r\n      (x / this.webgl.width) * 2 - 1,\r\n      (-y / this.webgl.height) * 2 + 1\r\n    );\r\n    // console.log('x, y: (' + x + ',' + y + ')');\r\n    // console.log(`transformed x, y: (${this.coords.x},${this.coords.y})`);\r\n    this.raycaster.setFromCamera(this.coords, this.webgl.camera);\r\n    let hits = this.raycaster.intersectObjects(this.webgl.interactables, true);\r\n\r\n    // console.log(hits.length > 0 ? `Hit ${hits[0].object.name}!` : 'No hit');\r\n  }\r\n\r\n  onPointerMove(event, [x, y]) {\r\n    this.coords.set(\r\n      (x / this.webgl.width) * 2 - 1,\r\n      (-y / this.webgl.height) * 2 + 1\r\n    );\r\n\r\n    this.raycaster.setFromCamera(this.coords, this.webgl.camera);\r\n    const hits = this.raycaster.intersectObjects(this.webgl.interactables);\r\n    // console.log(hits.length > 0 ? `Hit ${hits[0].object.name}!` : 'No hit');\r\n  }\r\n\r\n  onPointerUp(event, [x, y]) {}\r\n}\r\n","// Inspiration for this class goes to Matt DesLauriers @mattdesl,\n// really awesome dude, give him a follow!\n// https://github.com/mattdesl/threejs-app/blob/master/src/webgl/WebGLApp.js\nimport * as THREE from 'three';\nimport { EditorControls } from './EditorControlsFP';\nimport createTouches from 'touches';\nimport PickHelper from '../PickHelper';\nimport Stats from 'stats.js';\nimport { getGPUTier } from 'detect-gpu';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\n\nexport default class WebGLApp {\n  #updateListeners = [];\n  #tmpTarget = new THREE.Vector3();\n  #lastTime;\n  #width;\n  #height;\n\n  constructor({\n    background = '#000',\n    backgroundAlpha = 1,\n    fov = 75,\n    near = 0.1,\n    far = 1000,\n    editorControls = true,\n    ...options\n  } = {}) {\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: false,\n      alpha: false,\n      preserveDrawingBuffer: false, // makes screenshot easier, among other things\n      // failIfMajorPerformanceCaveat: true,\n      ...options,\n    });\n\n    this.canvas = this.renderer.domElement;\n\n    this.renderer.setClearColor(background, backgroundAlpha);\n\n    if (options.xr) {\n      this.renderer.xr.enabled = true;\n    }\n\n    // save the fixed dimensions\n    this.#width = options.width;\n    this.#height = options.height;\n\n    // clamp pixel ratio for performance\n    this.maxPixelRatio = options.maxPixelRatio || 2;\n    // clamp delta to stepping anything too far forward\n    this.maxDeltaTime = options.maxDeltaTime || 1 / 30;\n\n    // setup a basic camera\n    this.camera = new THREE.PerspectiveCamera(fov, 1, near, far);\n    this.camera.position.set(0, 2, 0);\n\n    this.scene = new THREE.Scene();\n\n    this.gl = this.renderer.getContext();\n\n    this.time = 0;\n    this.isRunning = false;\n    this.#lastTime = performance.now();\n\n    // handle resize events\n    window.addEventListener('resize', this.resize);\n    window.addEventListener('orientationchange', this.resize);\n\n    // force an initial resize event\n    this.resize();\n\n    // expose a composer for postprocessing passes\n    if (options.postprocessing) {\n      this.composer = new EffectComposer(this.renderer);\n      this.composer.addPass(new RenderPass(this.scene, this.camera));\n    }\n\n    //\n    // INTERACTION\n    //\n    this.pickHelper = new PickHelper(this);\n    this.interactables = new Array();\n\n    // Initialize Touches to map touch and mouse events to common interface\n    this.touchHandler = createTouches(this.canvas, {\n      target: this.canvas,\n      filtered: true,\n    });\n    this.isDragging = false;\n    this.touchHandler.on('start', (ev, pos) => {\n      this.isDragging = true;\n      this.pickHelper.onPointerDown(ev, pos);\n    });\n    this.touchHandler.on('move', (ev, pos) => {\n      this.pickHelper.onPointerMove(ev, pos);\n    });\n    this.touchHandler.on('end', (ev, pos) => {\n      this.isDragging = false;\n      // this.interactables.traverse('onPointerUp', ev, pos);\n    });\n\n    if (editorControls) {\n      this.editorControls = new EditorControls(\n        this.camera,\n        this.renderer.domElement\n      );\n      this.editorControls.movementSpeed = 10;\n      this.editorControls.lookSpeed = 0.1;\n      this.editorControls.activeLook = false;\n    }\n\n    //\n    // STATS\n    //\n    // show the fps meter\n    if (options.showFps) {\n      this.stats = new Stats();\n      this.stats.showPanel(0);\n      document.body.appendChild(this.stats.dom);\n    }\n\n    // detect the gpu info\n    const gpu = getGPUTier({ glContext: this.renderer.getContext() });\n    this.gpu = {\n      name: gpu.type,\n      tier: Number(gpu.tier.slice(-1)),\n      isMobile: gpu.tier.toLowerCase().includes('mobile'),\n    };\n  }\n\n  get width() {\n    return this.#width || window.innerWidth;\n  }\n\n  get height() {\n    return this.#height || window.innerHeight;\n  }\n\n  get pixelRatio() {\n    return Math.min(this.maxPixelRatio, window.devicePixelRatio);\n  }\n\n  resize = ({\n    width = this.width,\n    height = this.height,\n    pixelRatio = this.pixelRatio,\n  } = {}) => {\n    // update pixel ratio if necessary\n    if (this.renderer.getPixelRatio() !== pixelRatio) {\n      this.renderer.setPixelRatio(pixelRatio);\n    }\n\n    // setup new size & update camera aspect if necessary\n    this.renderer.setSize(width, height);\n    if (this.camera.isPerspectiveCamera) {\n      this.camera.aspect = width / height;\n    }\n    this.camera.updateProjectionMatrix();\n\n    // resize also the composer\n    if (this.composer) {\n      this.composer.setSize(pixelRatio * width, pixelRatio * height);\n    }\n\n    if (this.editorControls) {\n      this.editorControls.handleResize();\n    }\n\n    // recursively tell all child objects to resize\n    this.scene.traverse((obj) => {\n      if (typeof obj.resize === 'function') {\n        obj.resize({\n          width,\n          height,\n          pixelRatio,\n        });\n      }\n    });\n\n    // draw a frame to ensure the new size has been registered visually\n    this.draw();\n    return this;\n  };\n\n  update = (dt, time, xrframe) => {\n    if (this.editorControls) {\n      this.editorControls.update(dt);\n    }\n\n    // recursively tell all child objects to update\n    this.scene.traverse((obj) => {\n      if (typeof obj.update === 'function') {\n        obj.update(dt, time, xrframe);\n      }\n    });\n\n    // call the update listeners\n    this.#updateListeners.forEach((fn) => fn(dt, time, xrframe));\n\n    return this;\n  };\n\n  onUpdate(fn) {\n    this.#updateListeners.push(fn);\n  }\n\n  offUpdate(fn) {\n    const index = this.#updateListeners.indexOf(fn);\n\n    // return silently if the function can't be found\n    if (index === -1) {\n      return;\n    }\n\n    this.#updateListeners.splice(index, 1);\n  }\n\n  draw = () => {\n    if (this.composer) {\n      // const dt = Math.min(this.maxDeltaTime, (now - this.#lastTime) / 1000);\n      this.composer.render();\n    } else {\n      this.renderer.render(this.scene, this.camera);\n    }\n    return this;\n  };\n\n  start = () => {\n    if (this.isRunning) return;\n    this.renderer.setAnimationLoop(this.animate);\n    this.isRunning = true;\n    return this;\n  };\n\n  stop = () => {\n    if (!this.isRunning) return;\n    this.renderer.setAnimationLoop(null);\n    this.isRunning = false;\n    return this;\n  };\n\n  animate = (now, xrframe) => {\n    if (!this.isRunning) return;\n\n    if (this.stats) this.stats.begin();\n\n    const dt = Math.min(this.maxDeltaTime, (now - this.#lastTime) / 1000);\n    this.time += dt;\n    this.#lastTime = now;\n    this.update(dt, this.time, xrframe);\n    this.draw();\n\n    if (this.stats) this.stats.end();\n  };\n\n  traverse = (fn, ...args) => {\n    this.scene.traverse((child) => {\n      if (typeof child[fn] === 'function') {\n        child[fn].apply(child, args);\n      }\n    });\n  };\n\n  get cursor() {\n    return this.canvas.style.cursor;\n  }\n\n  set cursor(cursor) {\n    if (cursor) {\n      this.canvas.style.cursor = cursor;\n    } else {\n      this.canvas.style.cursor = null;\n    }\n  }\n}\n","// Inspiration for this code goes to Matt DesLauriers @mattdesl,\r\n// really awesome dude, give him a follow!\r\n// https://github.com/mattdesl/threejs-app/blob/master/src/util/loadTexture.js\r\nimport * as THREE from 'three';\r\nimport loadImage from 'image-promise';\r\n\r\nexport default async function loadTexture(url, options) {\r\n  const texture = new THREE.Texture();\r\n  texture.name = url;\r\n  texture.encoding = options.encoding || THREE.LinearEncoding;\r\n  setTextureParams(url, texture, options);\r\n\r\n  try {\r\n    const image = await loadImage(url, { crossorigin: 'anonymous' });\r\n\r\n    texture.image = image;\r\n    texture.needsUpdate = true;\r\n    if (options.renderer) {\r\n      // Force texture to be uploaded to GPU immediately,\r\n      // this will avoid \"jank\" on first rendered frame\r\n      options.renderer.initTexture(texture);\r\n    }\r\n    return texture;\r\n  } catch (err) {\r\n    throw new Error(`Could not load texture ${url}`);\r\n  }\r\n}\r\n\r\nfunction setTextureParams(url, texture, opt) {\r\n  if (typeof opt.flipY === 'boolean') texture.flipY = opt.flipY;\r\n  if (typeof opt.mapping !== 'undefined') {\r\n    texture.mapping = opt.mapping;\r\n  }\r\n  if (typeof opt.format !== 'undefined') {\r\n    texture.format = opt.format;\r\n  } else {\r\n    // choose a nice default format\r\n    const isJPEG =\r\n      url.search(/\\.(jpg|jpeg)$/) > 0 || url.search(/^data:image\\/jpeg/) === 0;\r\n    texture.format = isJPEG ? THREE.RGBFormat : THREE.RGBAFormat;\r\n  }\r\n  if (opt.repeat) texture.repeat.copy(opt.repeat);\r\n  texture.wrapS = opt.wrapS || THREE.ClampToEdgeWrapping;\r\n  texture.wrapT = opt.wrapT || THREE.ClampToEdgeWrapping;\r\n  texture.minFilter = opt.minFilter || THREE.LinearMipMapLinearFilter;\r\n  texture.magFilter = opt.magFilter || THREE.LinearFilter;\r\n  texture.generateMipmaps = opt.generateMipmaps !== false;\r\n}\r\n","// Inspiration for this class goes to Matt DesLauriers @mattdesl,\r\n// really awesome dude, give him a follow!\r\n// https://github.com/mattdesl/threejs-app/blob/master/src/util/AssetManager.js\r\n\r\nimport pMap from 'p-map';\r\nimport prettyMs from 'pretty-ms';\r\nimport loadImage from 'image-promise';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\r\n// import { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\r\n// import { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader';\r\nimport loadTexture from './loadTexture';\r\n// import loadEnvMap from './loadEnvMap';\r\n\r\nclass AssetManager {\r\n  #queue = [];\r\n  #cache = {};\r\n  #onProgressListeners = [];\r\n  #asyncConcurrency = 10;\r\n  #logs = [];\r\n\r\n  addProgressListener(fn) {\r\n    if (typeof fn !== 'function') {\r\n      throw new TypeError('onProgress must be a function');\r\n    }\r\n    this.#onProgressListeners.push(fn);\r\n  }\r\n\r\n  // Add an asset to be queued, input: { url, type, ...options }\r\n  queue({ url, type, ...options }) {\r\n    if (!url)\r\n      throw new TypeError(\r\n        'Must specify a URL or opt.url for AssetManager.queue()'\r\n      );\r\n    if (!this._getQueued(url)) {\r\n      this.#queue.push({\r\n        url,\r\n        type: type || this._extractType(url),\r\n        ...options,\r\n      });\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  _getQueued(url) {\r\n    return this.#queue.find((item) => item.url === url);\r\n  }\r\n\r\n  _extractType(url) {\r\n    const ext = url.slice(url.lastIndexOf('.'));\r\n\r\n    switch (true) {\r\n      case /\\.(gltf|glb)$/i.test(ext):\r\n        return 'gltf';\r\n      case /\\.fbx$/i.test(ext):\r\n        return 'fbx';\r\n      case /\\.json$/i.test(ext):\r\n        return 'json';\r\n      case /\\.svg$/i.test(ext):\r\n        return 'svg';\r\n      case /\\.(jpe?g|png|gif|bmp|tga|tif)$/i.test(ext):\r\n        return 'image';\r\n      case /\\.(wav|mp3)$/i.test(ext):\r\n        return 'audio';\r\n      case /\\.(mp4|webm|ogg|ogv)$/i.test(ext):\r\n        return 'video';\r\n      default:\r\n        throw new Error(`Could not load ${url}, unknown file extension!`);\r\n    }\r\n  }\r\n\r\n  // Fetch a loaded asset by URL\r\n  get = (url) => {\r\n    if (!url) throw new TypeError('Must specify an URL for AssetManager.get()');\r\n    if (!(url in this.#cache)) {\r\n      throw new Error(`The asset ${url} is not in the loaded files.`);\r\n    }\r\n\r\n    return this.#cache[url];\r\n  };\r\n\r\n  // Loads a single asset\r\n  async loadSingle({ renderer, ...item }) {\r\n    // renderer is used to load textures and env maps,\r\n    // but require it always since it is an extensible pattern\r\n    if (!renderer) {\r\n      throw new Error(\r\n        'You must provide a renderer to the loadSingle function.'\r\n      );\r\n    }\r\n\r\n    try {\r\n      const itemLoadingStart = Date.now();\r\n\r\n      this.#cache[item.url] = await this._loadItem({ renderer, ...item });\r\n\r\n      if (window.DEBUG) {\r\n        console.log(\r\n          ` Loaded single asset %c${item.url}%c in ${prettyMs(\r\n            Date.now() - itemLoadingStart\r\n          )}`,\r\n          'color:blue',\r\n          'color:black'\r\n        );\r\n      }\r\n\r\n      return item.url;\r\n    } catch (err) {\r\n      delete this.#cache[item.url];\r\n      console.error(`  Could not load ${item.url}:\\n${err}`);\r\n    }\r\n  }\r\n\r\n  // Loads all queued assets\r\n  async load({ renderer }) {\r\n    // renderer is used to load textures and env maps,\r\n    // but require it always since it is an extensible pattern\r\n    if (!renderer) {\r\n      throw new Error('You must provide a renderer to the load function.');\r\n    }\r\n\r\n    const queue = this.#queue.slice();\r\n    this.#queue.length = 0; // clear queue\r\n\r\n    const total = queue.length;\r\n    if (total === 0) {\r\n      // resolve first this functions and then call the progress listeners\r\n      setTimeout(() => this.#onProgressListeners.forEach((fn) => fn(1)), 0);\r\n      return;\r\n    }\r\n\r\n    const loadingStart = Date.now();\r\n\r\n    await pMap(\r\n      queue,\r\n      async (item, i) => {\r\n        try {\r\n          const itemLoadingStart = Date.now();\r\n\r\n          this.#cache[item.url] = await this._loadItem({ renderer, ...item });\r\n\r\n          if (window.DEBUG) {\r\n            this.log(\r\n              `Loaded %c${item.url}%c in ${prettyMs(\r\n                Date.now() - itemLoadingStart\r\n              )}`,\r\n              'color:blue',\r\n              'color:black'\r\n            );\r\n          }\r\n        } catch (err) {\r\n          this.logError(`Skipping ${item.url} from asset loading:\\n${err}`);\r\n        }\r\n\r\n        const percent = (i + 1) / total;\r\n        this.#onProgressListeners.forEach((fn) => fn(percent));\r\n      },\r\n      { concurrency: this.#asyncConcurrency }\r\n    );\r\n\r\n    if (window.DEBUG) {\r\n      const errors = this.#logs.filter((log) => log.type === 'error');\r\n\r\n      this.groupLog(\r\n        ` Assets loaded in ${prettyMs(Date.now() - loadingStart)}  ${\r\n          errors.length > 0\r\n            ? `%c  Skipped ${errors.length} asset${\r\n                errors.length > 1 ? 's' : ''\r\n              } `\r\n            : ''\r\n        }`,\r\n        errors.length > 0 ? 'color:white;background:red;' : ''\r\n      );\r\n    }\r\n  }\r\n\r\n  // Loads a single asset on demand, returning from\r\n  // cache if it exists otherwise adding it to the cache\r\n  // after loading.\r\n  async _loadItem({ url, type, renderer, ...options }) {\r\n    if (url in this.#cache) {\r\n      return this.#cache[url];\r\n    }\r\n\r\n    switch (type) {\r\n      case 'gltf':\r\n        return new Promise((resolve, reject) => {\r\n          new GLTFLoader().load(url, resolve, null, (err) =>\r\n            reject(new Error(`Could not load GLTF asset ${url}:\\n${err}`))\r\n          );\r\n        });\r\n      case 'fbx':\r\n        return new Promise((resolve, reject) => {\r\n          new FBXLoader().load(url, resolve, null, (err) =>\r\n            reject(new Error(`Could not load FBX asset ${url}:\\n${err}`))\r\n          );\r\n        });\r\n      case 'json':\r\n        return fetch(url).then((response) => response.json());\r\n      // case 'env-map':\r\n      //   return loadEnvMap(url, { renderer, ...options });\r\n      case 'svg':\r\n      case 'image':\r\n        return loadImage(url, { crossorigin: 'anonymous' });\r\n      case 'texture':\r\n        return loadTexture(url, { renderer, ...options });\r\n      case 'audio':\r\n        // You might not want to load big audio files and\r\n        // store them in memory, that might be inefficient.\r\n        // Rather load them outside of the queue\r\n        return fetch(url).then((response) => response.arrayBuffer());\r\n      case 'video':\r\n        // You might not want to load big video files and\r\n        // store them in memory, that might be inefficient.\r\n        // Rather load them outside of the queue\r\n        return fetch(url).then((response) => response.blob());\r\n      default:\r\n        throw new Error(`Could not load ${url}, the type ${type} is unknown!`);\r\n    }\r\n  }\r\n\r\n  log(...text) {\r\n    this.#logs.push({ type: 'log', text });\r\n  }\r\n\r\n  logError(...text) {\r\n    this.#logs.push({ type: 'error', text });\r\n  }\r\n\r\n  groupLog(...text) {\r\n    console.groupCollapsed(...text);\r\n    this.#logs.forEach((log) => {\r\n      console[log.type](...log.text);\r\n    });\r\n    console.groupEnd();\r\n\r\n    this.#logs.length = 0; // clear logs\r\n  }\r\n}\r\n\r\n// asset manager is a singleton, you can require it from\r\n// different files and use the same instance.\r\n// A plain js object would have worked just fine,\r\n// fucking java patterns\r\nexport default new AssetManager();\r\n","import * as THREE from 'three';\r\nimport assets from '../lib/AssetManager';\r\n\r\n//\r\n// ENVIRONMENTAL MAP\r\n//\r\n\r\nexport const HdriPink = new THREE.CubeTextureLoader()\r\n  .setPath('assets/textures/skybox/skyboxPink/')\r\n  .load([\r\n    'px.png', // right\r\n    'nx.png', // left\r\n    'py.png', // up\r\n    'ny.png', // down\r\n    'pz.png', // back\r\n    'nz.png', //fwd\r\n  ]);\r\n\r\n//\r\n// TEXTURES\r\n//\r\n\r\n/* Spotty Metal\r\nconst T_SpottyMetal_BCKey = assets.queue({\r\n  url: 'assets/spotty-metal/albedo.jpg',\r\n  type: 'texture',\r\n}) */\r\n\r\nconst T_VideoTextureMain = new THREE.VideoTexture(\r\n  document.getElementById('video')\r\n);\r\n\r\n//\r\n// MATERIALS\r\n//\r\n\r\n// FLOWER\r\nexport const MAT_Flower = new THREE.MeshStandardMaterial({\r\n  name: 'Flower',\r\n  color: 'hsl(323, 66%, 67%)',\r\n  roughness: 0.5,\r\n  metalness: 0,\r\n  side: THREE.DoubleSide,\r\n});\r\n\r\n// PINK BUILDING\r\nexport const MAT_Building = new THREE.MeshStandardMaterial({\r\n  name: 'Building',\r\n  color: 'hsl(323, 66%, 67%)',\r\n  roughness: 0.75,\r\n  metalness: 0,\r\n});\r\n\r\n// NEON WHITE\r\nexport const MAT_NeonWhite = new THREE.MeshStandardMaterial({\r\n  name: 'Neon',\r\n  color: 0xffffff,\r\n  emissive: 0xffffff,\r\n  emissiveIntensity: 2,\r\n  roughness: 0,\r\n  metalness: 0,\r\n});\r\n\r\n// NEON PINK\r\nexport const MAT_NeonPink = new THREE.MeshStandardMaterial({\r\n  name: 'Neon',\r\n  color: 'hsl(323, 66%, 67%)',\r\n  emissive: 'hsl(323, 66%, 67%)',\r\n  emissiveIntensity: 2,\r\n  roughness: 0,\r\n  metalness: 0,\r\n});\r\n\r\n// STAIR PILLAR\r\nexport const MAT_StairPillar = new THREE.MeshPhysicalMaterial({\r\n  name: 'StairPillar',\r\n  color: 'hsl(0,0%,50%)',\r\n  roughness: 0.13,\r\n  metalness: 0.8,\r\n  // transparency: 0,\r\n  // transparent: false,\r\n  // depthWrite: false,\r\n  envMap: HdriPink,\r\n});\r\n\r\n// VIDEO MATERIAL\r\n\r\nexport const MAT_Video = new THREE.MeshStandardMaterial({\r\n  name: 'Video',\r\n  map: T_VideoTextureMain,\r\n  roughness: 1,\r\n  metalness: 0,\r\n  emissive: 0xffffff,\r\n  emissiveIntensity: 1,\r\n  emissiveMap: T_VideoTextureMain,\r\n});\r\n\r\nexport const MAT_Screen = new THREE.MeshStandardMaterial({\r\n  name: 'Screen',\r\n  color: 'hsl(0,0%,0%)',\r\n  roughness: 1,\r\n  metalness: 0,\r\n});\r\n\r\n// EASING HER JOURNEY\r\nexport const MAT_EHJwall = new THREE.MeshStandardMaterial({\r\n  name: 'EHJwall',\r\n  color: 'hsl(0,0%,0%)',\r\n  roughness: 0,\r\n  metalness: 1,\r\n  side: THREE.DoubleSide,\r\n});\r\n\r\nexport const MAT_EHJinlay = new THREE.MeshStandardMaterial({\r\n  name: 'EHJinlay',\r\n  color: 'hsl(64,100%,100%)',\r\n  roughness: 0,\r\n  metalness: 0,\r\n  emissive: 'hsl(64,100%,100%)',\r\n  emissiveIntensity: 1,\r\n  side: THREE.DoubleSide,\r\n});\r\n\r\n// MAC BEAUTY BAR\r\nexport const MAT_Marble = new THREE.MeshStandardMaterial({\r\n  name: 'Marble',\r\n  // map: T_VideoTextureMain,\r\n  color: 'hsl(0,0%,100%)',\r\n  roughness: 1,\r\n  metalness: 0.2,\r\n});\r\n\r\nexport const MAT_MatteBlack = new THREE.MeshStandardMaterial({\r\n  name: 'MatteBlack',\r\n  color: 'hsl(0,0%,12%)',\r\n  roughness: 0.85,\r\n  metalness: 0.1,\r\n});\r\n\r\nexport const MAT_SteelFrame = new THREE.MeshStandardMaterial({\r\n  name: 'SteelFrame',\r\n  color: 'hsl(0,0%,75%)',\r\n  roughness: 0.85,\r\n  metalness: 1,\r\n});\r\n\r\nexport const MAT_WhiteSteel = new THREE.MeshStandardMaterial({\r\n  name: 'WhiteSteel',\r\n  color: 'hsl(0,0%,90%)',\r\n  roughness: 0.85,\r\n  metalness: 1,\r\n});\r\n\r\n// MACover\r\n\r\n// VIDEO STILL\r\n/*\r\nexport const MAT_TNfruity = new THREE.MeshStandardMaterial({\r\n  name: 'TNfruity',\r\n  // color: 'hsl(0,0%,100%)',\r\n  map: assets.get(T_TNfruity_BCKey),\r\n  roughness: 0.85,\r\n  metalness: 0,\r\n});\r\n\r\nexport const MAT_TNehjMain = new THREE.MeshStandardMaterial({\r\n  name: 'TNehjMain',\r\n  // color: 'hsl(0,0%,100%)',\r\n  map: assets.get(T_TNehjMain_BCKey),\r\n  roughness: 0.85,\r\n  metalness: 0,\r\n});\r\n\r\nexport const MAT_TNehjMini = new THREE.MeshStandardMaterial({\r\n  name: 'TNehjMini',\r\n  // color: 'hsl(0,0%,100%)',\r\n  map: assets.get(T_TNehjMini_BCKey),\r\n  roughness: 0.85,\r\n  metalness: 0,\r\n});\r\n\r\nexport const MAT_TNtogether = new THREE.MeshStandardMaterial({\r\n  name: 'TNtogether',\r\n  // color: 'hsl(0,0%,100%)',\r\n  map: assets.get(T_TNtogether_BCKey),\r\n  roughness: 0.85,\r\n  metalness: 0,\r\n});\r\n\r\nexport const MAT_TNtoday = new THREE.MeshStandardMaterial({\r\n  name: 'TNtoday',\r\n  // color: 'hsl(0,0%,100%)',\r\n  map: assets.get(T_TNtoday_BCKey),\r\n  roughness: 0.85,\r\n  metalness: 0,\r\n});\r\n\r\nexport const MAT_TNdisability = new THREE.MeshStandardMaterial({\r\n  name: 'TNfruity',\r\n  // color: 'hsl(0,0%,100%)',\r\n  map: assets.get(T_TNdisability_BCKey),\r\n  roughness: 0.85,\r\n  metalness: 0,\r\n});\r\n*/\r\n","import * as THREE from 'three';\r\nimport { Water } from 'three/examples/jsm/objects/Water.js';\r\n\r\nexport default class Gallery extends THREE.Group {\r\n  constructor() {\r\n    super();\r\n    let waterGeometry = new THREE.PlaneBufferGeometry(3000, 3000);\r\n\r\n    this.water = new Water(waterGeometry, {\r\n      textureWidth: 512,\r\n      textureHeight: 512,\r\n      waterNormals: new THREE.TextureLoader().load(\r\n        'assets/textures/waternormals.jpg',\r\n        function (texture) {\r\n          texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\r\n        }\r\n      ),\r\n      alpha: 1.0,\r\n      // sunDirection: light.position.clone().normalize(),\r\n      sunColor: 0xfaebf1,\r\n      waterColor: 0x000000,\r\n      distortionScale: 3.7,\r\n      // fog: scene.fog !== undefined,\r\n    });\r\n\r\n    this.water.rotation.x = -Math.PI / 2;\r\n\r\n    this.add(this.water);\r\n  }\r\n\r\n  update(dt, time) {\r\n    this.water.material.uniforms['time'].value += 1.0 / 120.0;\r\n  }\r\n}\r\n","import * as THREE from 'three';\r\nimport assets from '../../lib/AssetManager';\r\n\r\nimport {\r\n  MAT_NeonWhite,\r\n  MAT_Flower,\r\n  MAT_Building,\r\n  MAT_StairPillar,\r\n  MAT_EHJwall,\r\n  MAT_EHJinlay,\r\n  MAT_Marble,\r\n  MAT_MatteBlack,\r\n  MAT_WhiteSteel,\r\n  MAT_SteelFrame,\r\n  // thumbnails\r\n  // MAT_TNdisability,\r\n  // MAT_TNehjMain,\r\n  // MAT_TNehjMini,\r\n  // MAT_TNfruity,\r\n  // MAT_TNtoday,\r\n  // MAT_TNtogether,\r\n} from '../Materials';\r\n\r\nconst galleryKey = assets.queue({\r\n  url: 'assets/models/Gallery.glb',\r\n  type: 'gltf',\r\n});\r\n\r\nexport default class Gallery extends THREE.Group {\r\n  constructor(webgl) {\r\n    super();\r\n\r\n    this.galleryGltf = assets.get(galleryKey);\r\n\r\n    this.add(this.galleryGltf.scene);\r\n    // this.scale.multiplyScalar(0.1);\r\n  }\r\n\r\n  setup() {\r\n    // temp place to load textures & materials\r\n    // VIDEO\r\n    const T_TNfruity_BCKey = new THREE.TextureLoader().load(\r\n      'assets/textures/videoTN/tnfruity.jpg'\r\n    );\r\n\r\n    const T_TNtogether_BCKey = new THREE.TextureLoader().load(\r\n      'assets/textures/videoTN/tntogether.jpg'\r\n    );\r\n\r\n    const T_TNtoday_BCKey = new THREE.TextureLoader().load(\r\n      'assets/textures/videoTN/tntoday.jpg'\r\n    );\r\n\r\n    const T_TNdisability_BCKey = new THREE.TextureLoader().load(\r\n      'assets/textures/videoTN/tndisability.jpg'\r\n    );\r\n\r\n    const T_TNehjMain_BCKey = new THREE.TextureLoader().load(\r\n      'assets/textures/videoTN/tnehjmain.jpg'\r\n    );\r\n\r\n    const T_TNehjMini_BCKey = new THREE.TextureLoader().load(\r\n      'assets/textures/videoTN/tnehjmini.jpg'\r\n    );\r\n\r\n    const MAT_TNfruity = new THREE.MeshStandardMaterial({\r\n      name: 'TNfruity',\r\n      // color: 'hsl(0,0%,100%)',\r\n      map: T_TNfruity_BCKey,\r\n      roughness: 0.85,\r\n      metalness: 0,\r\n    });\r\n\r\n    const MAT_TNehjMain = new THREE.MeshStandardMaterial({\r\n      name: 'TNehjMain',\r\n      // color: 'hsl(0,0%,100%)',\r\n      map: T_TNehjMain_BCKey,\r\n      roughness: 0.85,\r\n      metalness: 0,\r\n    });\r\n\r\n    const MAT_TNehjMini = new THREE.MeshStandardMaterial({\r\n      name: 'TNehjMini',\r\n      // color: 'hsl(0,0%,100%)',\r\n      map: T_TNehjMini_BCKey,\r\n      roughness: 0.85,\r\n      metalness: 0,\r\n    });\r\n\r\n    const MAT_TNtogether = new THREE.MeshStandardMaterial({\r\n      name: 'TNtogether',\r\n      // color: 'hsl(0,0%,100%)',\r\n      map: T_TNtogether_BCKey,\r\n      roughness: 0.85,\r\n      metalness: 0,\r\n    });\r\n\r\n    const MAT_TNtoday = new THREE.MeshStandardMaterial({\r\n      name: 'TNtoday',\r\n      // color: 'hsl(0,0%,100%)',\r\n      map: T_TNtoday_BCKey,\r\n      roughness: 0.85,\r\n      metalness: 0,\r\n    });\r\n\r\n    const MAT_TNdisability = new THREE.MeshStandardMaterial({\r\n      name: 'TNfruity',\r\n      // color: 'hsl(0,0%,100%)',\r\n      map: T_TNdisability_BCKey,\r\n      roughness: 0.85,\r\n      metalness: 0,\r\n    });\r\n\r\n    this.galleryGltf.scene.traverse((child) => {\r\n      // SET MATERIALS\r\n      if (child.material)\r\n        switch (child.material.name) {\r\n          case 'Neon':\r\n            child.material = MAT_NeonWhite;\r\n            break;\r\n          case 'Flower':\r\n            child.material = MAT_Flower;\r\n            break;\r\n          // case 'Building':\r\n          //   child.material = MAT_Building;\r\n          //   break;\r\n          case 'Stair-Pillar':\r\n            child.material = MAT_StairPillar;\r\n            break;\r\n          // EHJ\r\n          case 'Car Paint - Black':\r\n            child.material = MAT_EHJwall;\r\n            break;\r\n          case 'LED Yellow':\r\n            child.material = MAT_EHJinlay;\r\n            break;\r\n          // MIRROR\r\n          case 'steelframe1':\r\n            child.material = MAT_SteelFrame;\r\n            break;\r\n          case 'whitesteel':\r\n            child.material = MAT_WhiteSteel;\r\n            break;\r\n          case 'neon':\r\n            child.material = MAT_NeonWhite;\r\n            break;\r\n          case 'marble':\r\n            child.material = MAT_Marble;\r\n            break;\r\n          case 'matteblack':\r\n            child.material = MAT_MatteBlack;\r\n            break;\r\n        }\r\n      if (child.name) {\r\n        switch (child.name) {\r\n          case 'ScreenFruity':\r\n            child.material = MAT_TNfruity;\r\n            break;\r\n          case 'ScreenTogether':\r\n            child.material = MAT_TNtogether;\r\n            break;\r\n          case 'ScreenToday':\r\n            child.material = MAT_TNtoday;\r\n            break;\r\n          case 'ScreenDisability':\r\n            child.material = MAT_TNdisability;\r\n            break;\r\n          case 'ScreenEHJmain':\r\n            child.material = MAT_TNehjMain;\r\n            break;\r\n          case 'ScreenEHJp1':\r\n            child.material = MAT_TNehjMini;\r\n            break;\r\n          case 'ScreenEHJp2':\r\n            child.material = MAT_TNehjMini;\r\n            break;\r\n          case 'ScreenEHJp3':\r\n            child.material = MAT_TNehjMini;\r\n            break;\r\n          case 'ScreenEHJp4':\r\n            child.material = MAT_TNehjMini;\r\n            break;\r\n        }\r\n      }\r\n      // SET INTERACTABLES\r\n      if (child.name) {\r\n        if (child.name.includes('Menu')) {\r\n          webgl.interactables.push(child);\r\n        } else if (child.name.includes('Pedestal')) {\r\n          webgl.interactables.push(child);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n","import * as THREE from 'three';\r\nimport WebGLApp from './lib/WebGLApp';\r\nimport assets from './lib/AssetManager';\r\nimport { addEnvironment } from './scene/lights';\r\nimport Ocean from './scene/Ocean';\r\nimport Gallery from './scene/Meshes/Gallery';\r\nimport { GUI } from 'three/examples/jsm/libs/dat.gui.module';\r\n\r\n// Post-Processing\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\r\n// import passVert from './scene/shaders/pass.vert';\r\n// import vignetteFrag from './scene/shaders/vignette.frag';\r\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass';\r\nimport { SAOPass } from 'three/examples/jsm/postprocessing/SAOPass';\r\n\r\n//\r\n\r\n//\r\n// SETUP\r\n//\r\n\r\n// window.DEBUG = window.location.search.includes('debug');\r\nwindow.DEBUG = true;\r\n\r\nconst canvas = document.querySelector('#app');\r\n\r\n// setup the WebGLRenderer\r\nconst webgl = new WebGLApp({\r\n  canvas,\r\n  alpha: false,\r\n  background: '#000',\r\n  backgroundAlpha: 1,\r\n  postprocessing: true,\r\n  showFps: false,\r\n});\r\n\r\n// attach webgl to the window to inspect in the console\r\nif (window.DEBUG) {\r\n  window.webgl = webgl;\r\n  window.gui = new GUI();\r\n}\r\n\r\n// hide canvas (enabled in asset load callback)\r\nwebgl.canvas.style.visibility = 'hidden';\r\n\r\n//\r\n// SCENE\r\n//\r\n\r\nassets.load({ renderer: webgl.renderer }).then(() => {\r\n  console.log('load callback');\r\n\r\n  // show canvas\r\n  webgl.canvas.style.visibility = '';\r\n\r\n  // RENDERER CONFIG -- probably move\r\n  // webgl.renderer.physicallyCorrectLights = true;\r\n  // webgl.renderer.toneMapping = THREE.ACESFilmicToneMapping;\r\n  // webgl.renderer.toneMappingExposure\r\n\r\n  // ENVIRONMENT & LIGHTING\r\n  addEnvironment(webgl);\r\n\r\n  const ocean = new Ocean(); // TODO: add sun direction & fog\r\n  ocean.position.y = 0;\r\n  webgl.scene.add(ocean);\r\n\r\n  // ADD MAIN GALLERY SPACE\r\n  const gallery = new Gallery(webgl);\r\n  webgl.scene.gallery = gallery;\r\n  webgl.scene.add(gallery);\r\n  gallery.setup();\r\n\r\n  // POSTPROCESSING\r\n  /*\r\n  const saoPass = new SAOPass(webgl.scene, webgl.camera);\r\n  saoPass.params.saoIntensity = 0.02;\r\n  saoPass.params.saoScale = 15;\r\n  saoPass.params.saoKernelRadius = 5;\r\n  webgl.composer.addPass(saoPass);\r\n\r\n  if (window.DEBUG) {\r\n    const folder = window.gui.addFolder('SAO Pass');\r\n    folder.add(saoPass.params, 'saoBias', -1, 1);\r\n    folder.add(saoPass.params, 'saoIntensity', 0, 1);\r\n    folder.add(saoPass.params, 'saoScale', 0, 100);\r\n    folder.add(saoPass.params, 'saoKernelRadius', 1, 100);\r\n    folder.add(saoPass.params, 'saoMinResolution', 0, 1);\r\n    folder.add(saoPass.params, 'saoBlur');\r\n    folder.add(saoPass.params, 'saoBlurRadius', 0, 200);\r\n    folder.add(saoPass.params, 'saoBlurStdDev', 0.5, 150);\r\n    folder.add(saoPass.params, 'saoBlurDepthCutoff', 0.0, 0.1);\r\n  }\r\n  */\r\n\r\n  /* SSAO looks kinda shitty\r\n  const ssaoPass = new SSAOPass(\r\n    webgl.scene,\r\n    webgl.camera,\r\n    webgl.width,\r\n    webgl.height\r\n  );\r\n  webgl.composer.addPass(ssaoPass);\r\n\r\n  if (window.DEBUG) {\r\n    const folder = window.gui.addFolder('SSAO Pass');\r\n    folder.add(ssaoPass, 'kernelRadius').min(0.01).max(32);\r\n    folder.add(ssaoPass, 'minDistance').min(0.001).max(0.02);\r\n    folder.add(ssaoPass, 'maxDistance').min(0.01).max(0.3);\r\n  }\r\n  */\r\n\r\n  // BLOOM\r\n  const bloomPass = new UnrealBloomPass(\r\n    new THREE.Vector2(window.innerWidth, window.innerHeight),\r\n    0.4, // strength 0.3\r\n    0, // radius 0\r\n    0.95 // threshold 0.9\r\n  );\r\n  bloomPass.renderToScreen = true;\r\n  webgl.bloomPass = bloomPass;\r\n  webgl.composer.addPass(bloomPass);\r\n\r\n  if (window.DEBUG) {\r\n    const folder = window.gui.addFolder('BloomPass');\r\n    folder.add(bloomPass, 'threshold', 0.0, 3.0).step(0.01);\r\n    folder.add(bloomPass, 'strength', 0.0, 3.0).step(0.01);\r\n    folder.add(bloomPass, 'radius', 0.0, 1.0).step(0.01);\r\n  }\r\n\r\n  /* VIGNETTE\r\n  const vignettePass = new ShaderPass({\r\n    vertexShader: passVert,\r\n    fragmentShader: vignetteFrag,\r\n    uniforms: {\r\n      tDiffuse: { type: 't', value: new THREE.Texture() },\r\n    },\r\n  });\r\n  vignettePass.renderToScreen = true;\r\n  webgl.composer.addPass(vignettePass);\r\n  */\r\n\r\n  // ANIMATION\r\n  webgl.start();\r\n  webgl.draw();\r\n});\r\n","import * as THREE from 'three';\nimport assets from '../lib/AssetManager';\nimport { HdriPink } from './Materials';\n\n// natural hemisphere light from\n// https://threejs.org/examples/#webgl_lights_hemisphere\nexport function addNaturalLight(webgl) {\n  const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);\n  hemiLight.color.setHSL(0.6, 1, 0.6);\n  hemiLight.groundColor.setHSL(0.095, 1, 0.75);\n  hemiLight.position.set(0, 50, 0);\n  webgl.scene.add(hemiLight);\n\n  const dirLight = new THREE.DirectionalLight(0xffffff, 1);\n  dirLight.color.setHSL(0.1, 1, 0.95);\n  dirLight.position.set(3, 5, 1);\n  dirLight.position.multiplyScalar(50);\n  webgl.scene.add(dirLight);\n}\n\nexport function addEnvironment(webgl) {\n  webgl.scene.background = HdriPink;\n  webgl.scene.environment = HdriPink;\n\n  // webgl.scene.fog = new THREE.Fog(0xcbaecd, 1000, 1500);\n\n  // ENVIRONMENTAL LIGHTING\n  const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.3);\n  webgl.scene.hemiLight = hemiLight;\n  webgl.scene.add(hemiLight);\n\n  const lightDirKey = new THREE.DirectionalLight(0xffffff, 1);\n  lightDirKey.position.set(6, 10, 9);\n  lightDirKey.position.multiplyScalar(50);\n  webgl.scene.lightDirKey = lightDirKey;\n  webgl.scene.add(lightDirKey);\n\n  // const lightDirFill = new THREE.DirectionalLight(0xc9d9ff, 0.5);\n  // lightDirFill.position.set(-6, 10, -9);\n  // webgl.scene.add(lightDirFill);\n}\n"],"sourceRoot":""}